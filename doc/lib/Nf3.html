<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Nf3</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: Nf3</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>Nf3<span class="signature">(clientBaseUrl, optimistBaseUrl, optimistWsUrl, web3WsUrl, ethereumSigningKey, zkpKeys)</span><span class="type-signature"></span></h2>
        
            <div class="class-description">Creates a new Nightfall_3 library instance.</div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    
    <h4 class="name" id="Nf3"><span class="type-signature"></span>new Nf3<span class="signature">(clientBaseUrl, optimistBaseUrl, optimistWsUrl, web3WsUrl, ethereumSigningKey, zkpKeys)</span><span class="type-signature"></span></h4>
    

    











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>clientBaseUrl</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The base url for nightfall-client</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>optimistBaseUrl</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The base url for nightfall-optimist</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>optimistWsUrl</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The webscocket url for nightfall-optimist</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>web3WsUrl</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The websocket url for the web3js client</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ethereumSigningKey</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the Ethereum siging key to be used for transactions (hex string).</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>zkpKeys</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">An object containing the zkp keys to use.  These will be auto-generated if left undefined.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line17">line 17</a>
    </li></ul></dd>
    

    

    

    
</dl>




















    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="addPeer"><span class="type-signature">(async) </span>addPeer<span class="signature">(peerUrl)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Adds a new Proposer peer to a list of proposers that are available for accepting
  offchain (direct) transfers and withdraws. The client will submit direct transfers
  and withdraws to all of these peers.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>peerUrl</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the URL of the Proposer being added. This will be from
  the point of view of nightfall-client, not the SDK user (e.g. 'http://optimist1:80').
  Nightfall-client will use this URL to contact the Proposer.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line508">line 508</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="advanceInstantWithdrawal"><span class="type-signature">(async) </span>advanceInstantWithdrawal<span class="signature">(withdrawTransactionHash)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Enables someone to service a request for an instant withdrawal
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>withdrawTransactionHash</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the hash of the Layer 2 transaction in question</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line374">line 374</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="close"><span class="type-signature">(async) </span>close<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Closes the Nf3 connection to the blockchain and any open websockets to NF_3
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line432">line 432</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="deposit"><span class="type-signature">(async) </span>deposit<span class="signature">(fee, ercAddress, tokenType, value, tokenId, keys)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Deposits a Layer 1 token into Layer 2, so that it can be transacted
  privately.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fee</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The amount (Wei) to pay a proposer for the transaction</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ercAddress</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The address of the ERCx contract from which the token
  is being taken.  Note that the Nightfall_3 State.sol contract must be approved
  by the token's owner to be able to withdraw the token.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>tokenType</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The type of token to deposit. Possible values are
  'ERC20', 'ERC721', 'ERC1155'.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The value of the token, in the case of an ERC20 or ERC1155
  token.  For ERC721 this should be set to zero.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>tokenId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The ID of an ERC721 or ERC1155 token.  In the case of
  an 'ERC20' coin, this should be set to '0x00'.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>keys</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">The ZKP private key set.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line213">line 213</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Resolves into the Ethereum transaction receipt.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="deregisterChallenger"><span class="type-signature">(async) </span>deregisterChallenger<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    De-registers our address as a challenger address with the optimist container.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line585">line 585</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves to an axios response.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="deregisterProposer"><span class="type-signature">(async) </span>deregisterProposer<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    De-registers an existing proposer.
  It will use the address of the Ethereum Signing key that is holds to de-register
  the proposer.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line464">line 464</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves to the Ethereum transaction receipt.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="finaliseWithdrawal"><span class="type-signature">(async) </span>finaliseWithdrawal<span class="signature">(withdrawTransactionHash)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Enables someone with a valid withdraw transaction in flight to finalise the
  withdrawal of funds to L1 (only relevant for ERC20).
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>withdrawTransactionHash</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the hash of the Layer 2 transaction in question</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line331">line 331</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="getChallengeEmitter"><span class="type-signature">(async) </span>getChallengeEmitter<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Returns an emitter, whose 'data' event fires whenever a challengeable block is
  detected, passing out the transaction needed to raise the challenge. This
  is a lower level method than `Nf3.startChallenger` because it does not sign and
  send the transaction to the blockchain. If required, `Nf3.submitTransaction`
  can be used to do that.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line622">line 622</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A Promise that resolves into an event emitter.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getContractAddress"><span class="type-signature">(async) </span>getContractAddress<span class="signature">(contractName)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Returns the address of a Nightfall_3 contract.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>contractName</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the name of the smart contract in question. Possible
  values are 'Shield', 'State', 'Proposers', 'Challengers'.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line190">line 190</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Resolves into the Ethereum address of the contract
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getInstantWithdrawalRequestedEmitter"><span class="type-signature">(async) </span>getInstantWithdrawalRequestedEmitter<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Returns an event emitter that fires each time an InstantWithdrawalRequested
  event is detected on the blockchain
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line394">line 394</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="getLatestWithdrawHash"><span class="type-signature"></span>getLatestWithdrawHash<span class="signature">()</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    Gets the hash of the last withdraw transaction - sometimes useful for instant transfers
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line386">line 386</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - the transactionHash of the last transaction
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getLayer2Balances"><span class="type-signature">(async) </span>getLayer2Balances<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Returns the balance of tokens held in layer 2
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line647">line 647</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    This promise rosolves into an object whose properties are the
  addresses of the ERC contracts of the tokens held by this account in Layer 2. The
  value of each propery is the number of tokens originating from that contract.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getLayer2Commitments"><span class="type-signature">(async) </span>getLayer2Commitments<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Returns the commitments of tokens held in layer 2
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line660">line 660</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    This promise rosolves into an object whose properties are the
  addresses of the ERC contracts of the tokens held by this account in Layer 2. The
  value of each propery is an array of commitments originating from that contract.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getNewBlockEmitter"><span class="type-signature">(async) </span>getNewBlockEmitter<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Returns an emitter, whose 'data' event fires whenever a block is
  detected, passing out the transaction needed to propose the block. This
  is a lower level method than `Nf3.startProposer` because it does not sign and
  send the transaction to the blockchain. If required, `Nf3.submitTransaction`
  can be used to do that.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line550">line 550</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A Promise that resolves into an event emitter.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getProposers"><span class="type-signature">(async) </span>getProposers<span class="signature">()</span><span class="type-signature"> &rarr; {array}</span></h4>
    

    



<div class="description">
    Get all the list of existing proposers.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line491">line 491</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves to the Ethereum transaction receipt.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">array</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="healthcheck"><span class="type-signature">(async) </span>healthcheck<span class="signature">(server)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Determines if a Nightfall_3 server is running and healthy.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>server</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The name of the server being checked ['client', 'optimist']</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line160">line 160</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    This will resolve into a boolean - true if the healthcheck passed.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="init"><span class="type-signature">(async) </span>init<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Initialises the Nf_3 object so that it can communicate with Nightfall_3 and the
  blockchain.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line77">line 77</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="registerChallenger"><span class="type-signature">(async) </span>registerChallenger<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Registers our address as a challenger address with the optimist container.
  This is so that the optimist container can tell when a challenge that we have
  committed to has appeared on chain.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line575">line 575</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves to an axios response.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="registerProposer"><span class="type-signature">(async) </span>registerProposer<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Registers a new proposer and pays the Bond required to register.
  It will use the address of the Ethereum Signing key that is holds to register
  the proposer.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line445">line 445</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves to the Ethereum transaction receipt.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="requestInstantWithdrawal"><span class="type-signature">(async) </span>requestInstantWithdrawal<span class="signature">(withdrawTransactionHash, fee)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Enables someone with a valid withdraw transaction in flight to request instant
  withdrawal of funds (only relevant for ERC20).
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>withdrawTransactionHash</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the hash of the Layer 2 transaction in question</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>fee</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">the amount being paid for the instant withdrawal service</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line353">line 353</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="setEthereumSigningKey"><span class="type-signature"></span>setEthereumSigningKey<span class="signature">(key)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Setter for the ethereum private key, in case it wasn't known at build time.
  This will also update the corresponding Ethereum address that Nf_3 uses.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the ethereum private key as a hex string.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line98">line 98</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="setzkpKeys"><span class="type-signature"></span>setzkpKeys<span class="signature">(keys)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Setter for the zkp keys, in case it wasn't known at build time and we don't
  want to use autogenerated ones.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>keys</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">The zkp keys object.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line113">line 113</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="startChallenger"><span class="type-signature">(async) </span>startChallenger<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Starts a Challenger that listens for challengable blocks and submits challenge
  transactions to the blockchain to challenge the block.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line597">line 597</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="startProposer"><span class="type-signature">(async) </span>startProposer<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Starts a Proposer that listens for blocks and submits block proposal
  transactions to the blockchain.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line524">line 524</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="submitTransaction"><span class="type-signature">(async) </span>submitTransaction<span class="signature">(unsignedTransaction, shieldContractAddress, fee)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Method for signing and submitting an Ethereum transaction to the
  blockchain.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>unsignedTransaction</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">An unsigned web3js transaction object.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>shieldContractAddress</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The address of the Nightfall_3 shield address.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>fee</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">the value of the transaction.
  This can be found using the getContractAddress convenience function.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line128">line 128</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    This will resolve into a transaction receipt.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="subscribeToIncomingViewingKeys"><span class="type-signature">(async) </span>subscribeToIncomingViewingKeys<span class="signature">(keys)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Provides nightfall-client with a set of viewing keys.  Without these,
  it won't listen for BlockProposed events and so won't update its transaction collection
  with information about which are on-line.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>keys</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">Object containing the ZKP key set (this may be generated
  with the makeKeys function).</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line420">line 420</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="transfer"><span class="type-signature">(async) </span>transfer<span class="signature">(fee, ercAddress, tokenType, value, tokenId, keys, pkd)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Transfers a token within Layer 2.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fee</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The amount (Wei) to pay a proposer for the transaction</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ercAddress</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The address of the ERCx contract from which the token
  is being taken.  Note that the Nightfall_3 State.sol contract must be approved
  by the token's owner to be able to withdraw the token.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>tokenType</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The type of token to deposit. Possible values are
  'ERC20', 'ERC721', 'ERC1155'.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The value of the token, in the case of an ERC20 or ERC1155
  token.  For ERC721 this should be set to zero.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>tokenId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The ID of an ERC721 or ERC1155 token.  In the case of
  an 'ERC20' coin, this should be set to '0x00'.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>keys</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">The ZKP private key set of the sender.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>pkd</code></td>
            

            <td class="type">
            
                
<span class="param-type">array</span>


            
            </td>

            

            

            <td class="description last">The transmission key of the recipient (this is a curve point
  represented as an array of two hex strings).</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line245">line 245</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Resolves into the Ethereum transaction receipt.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="withdraw"><span class="type-signature">(async) </span>withdraw<span class="signature">(fee, ercAddress, tokenType, value, tokenId, keys, recipientAddress)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Withdraws a token from Layer 2 back to Layer 1. It can then be withdrawn from
  the Shield contract's account by the owner in Layer 1.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fee</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The amount (Wei) to pay a proposer for the transaction</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ercAddress</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The address of the ERCx contract from which the token
  is being taken.  Note that the Nightfall_3 State.sol contract must be approved
  by the token's owner to be able to withdraw the token.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>tokenType</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The type of token to deposit. Possible values are
  'ERC20', 'ERC721', 'ERC1155'.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The value of the token, in the case of an ERC20 or ERC1155
  token.  For ERC721 this should be set to zero.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>tokenId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The ID of an ERC721 or ERC1155 token.  In the case of
  an 'ERC20' coin, this should be set to '0x00'.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>keys</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">The ZKP private key set of the sender.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>recipientAddress</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The Ethereum address to where the withdrawn tokens
  should be deposited.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line292">line 292</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Resolves into the Ethereum transaction receipt.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="withdrawBond"><span class="type-signature">(async) </span>withdrawBond<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Withdraw the bond left by the proposer.
  It will use the address of the Ethereum Signing key that is holds to withdraw the bond.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="nf3.mjs.html">nf3.mjs</a>, <a href="nf3.mjs.html#line478">line 478</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves to the Ethereum transaction receipt.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Nf3.html">Nf3</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Thu Oct 28 2021 09:22:22 GMT+0100 (British Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>